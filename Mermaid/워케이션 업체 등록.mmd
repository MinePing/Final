sequenceDiagram
    actor Host as 사용자(호스트)
    participant Frontend as 프론트엔드
    participant SpringBoot as 백엔드(Spring Boot)
    participant DB as 데이터베이스
    participant GovAPI as 사업자 진위확인 외부 API

    %% 1. 호스트 신청 및 진위확인
    Host->>Frontend: 워케이션 등록 시작
    Frontend->>Host: 오피스/숙소 선택, 사업자 정보 입력폼

    Host->>Frontend: 사업자명, 상호명, 개업일, 사업자등록번호 입력
    Frontend->>SpringBoot: 진위확인 요청
    SpringBoot->>GovAPI: 사업자등록번호 진위확인
    GovAPI-->>SpringBoot: 진위확인 결과
    SpringBoot-->>Frontend: 결과 반환

    alt 진위확인 실패
        Frontend->>Host: 오류 메시지 표시, 다음 단계 불가
    else 진위확인 성공
        SpringBoot->>DB: 워케이션 기본 정보 INSERT
        Frontend->>Host: 다음 입력 단계로 이동 가능
    end

     %% 2~6. 입력 단계 반복 (임시 저장 가능)
    loop 반복적으로 사용자가 입력
        Host->>Frontend: 항목 입력 (테마, 사진, 주소, 정책 등)
        alt "임시 저장" 버튼 클릭
            Frontend->>Host: 저장하시겠습니까? (팝업 표시)
        end

        alt 사용자 "저장" 클릭 시
            Frontend->>SpringBoot: 현재 입력값 전달
            SpringBoot->>DB: 워케이션 튜플 UPDATE
            SpringBoot-->>Frontend: 임시 저장 완료 응답
            Frontend->>Host: "저장되었습니다" 메시지 표시
        else "취소" 누름
            Note over Host, Frontend: DB 반영 없음 (프론트 내 상태 유지)
        end
    end

    %% 📌 미리보기
    Host->>Frontend: "미리보기" 클릭
    Frontend->>Frontend: 현재 입력된 로컬 상태 기반 미리보기 페이지 렌더링
    Note right of Frontend: DB 저장 없이, 현재 입력된 값으로만 렌더링

    Host->>Frontend: 이전으로 돌아가기 클릭
    Frontend->>Host: 입력값 그대로 유지된 등록 페이지로 복귀

    %% 7. 상태 판단 (등록 이후)
    Host->>Frontend: "등록" 클릭
    Frontend->>SpringBoot: 모든 항목 채움 여부 확인 요청
    SpringBoot->>DB: 필수 필드 null 여부 검사
    alt 모든 값 존재
        SpringBoot->>DB: 워케이션 status = 'Y' 업데이트
        SpringBoot-->>Frontend: 공개 가능 상태 응답
    else 일부 필드 누락
        SpringBoot-->>Frontend: 공개 불가 응답 (status 그대로)
    end

    alt 등록 완료 조건
        Frontend->>Host: 등록 완료 메시지 표시
    else 입력값 미완성
        Frontend->>Host: 미완성 알림 표시
    end 
