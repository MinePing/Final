<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>localStorage 정리</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 600px;
        margin: 50px auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      button {
        background: #ff4444;
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin: 10px;
      }
      button:hover {
        background: #cc3333;
      }
      .success {
        color: green;
        font-weight: bold;
      }
      .error {
        color: red;
        font-weight: bold;
      }
      pre {
        background: #f8f8f8;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>localStorage 정리 도구</h1>
      <p>blob URL 문제를 해결하기 위해 localStorage를 정리합니다.</p>

      <button onclick="clearWorcationStore()">워케이션 스토어만 삭제</button>
      <button onclick="clearAllStorage()">모든 localStorage 삭제</button>
      <button onclick="checkStorage()">현재 상태 확인</button>

      <div id="result"></div>
    </div>

    <script>
      function clearWorcationStore() {
        try {
          localStorage.removeItem('worcation-store');
          document.getElementById('result').innerHTML =
            '<p class="success">✅ worcation-store가 성공적으로 삭제되었습니다!</p>';
        } catch (error) {
          document.getElementById('result').innerHTML =
            '<p class="error">❌ 삭제 중 오류 발생: ' + error.message + '</p>';
        }
      }

      function clearAllStorage() {
        try {
          localStorage.clear();
          document.getElementById('result').innerHTML =
            '<p class="success">✅ 모든 localStorage가 성공적으로 삭제되었습니다!</p>';
        } catch (error) {
          document.getElementById('result').innerHTML =
            '<p class="error">❌ 삭제 중 오류 발생: ' + error.message + '</p>';
        }
      }

      function checkStorage() {
        try {
          const worcationStore = localStorage.getItem('worcation-store');
          const allKeys = Object.keys(localStorage);

          let result = '<h3>현재 localStorage 상태:</h3>';
          result += '<p><strong>총 키 개수:</strong> ' + allKeys.length + '</p>';
          result += '<p><strong>키 목록:</strong></p>';
          result += '<pre>' + JSON.stringify(allKeys, null, 2) + '</pre>';

          if (worcationStore) {
            result += '<p><strong>worcation-store 내용:</strong></p>';
            try {
              const parsed = JSON.parse(worcationStore);
              result += '<pre>' + JSON.stringify(parsed, null, 2) + '</pre>';
            } catch (e) {
              result += '<p class="error">JSON 파싱 오류: ' + e.message + '</p>';
            }
          } else {
            result += '<p class="success">worcation-store가 없습니다.</p>';
          }

          document.getElementById('result').innerHTML = result;
        } catch (error) {
          document.getElementById('result').innerHTML =
            '<p class="error">❌ 확인 중 오류 발생: ' + error.message + '</p>';
        }
      }

      // 페이지 로드 시 자동으로 상태 확인
      window.onload = function () {
        checkStorage();
      };
    </script>
  </body>
</html>
